{"ast":null,"code":"import db from '../json/mime-db.json';\n// console.log('db', db)\n\nvar EXTRACT_TYPE_REGEXP = /^\\s*([^;\\s]*)(?:;|\\s|$)/;\nvar extensions = Object.create(null);\nvar types = Object.create(null);\nfunction populateMaps(extensions, types) {\n  var preference = ['nginx', 'apache', undefined, 'iana'];\n  Object.keys(db).forEach(function forEachMimeType(type) {\n    var mime = db[type];\n    var exts = mime.extensions;\n    if (!exts || !exts.length) {\n      return;\n    }\n    extensions[type] = exts;\n    for (var i = 0; i < exts.length; i++) {\n      var extension = exts[i];\n      if (types[extension]) {\n        var from = preference.indexOf(db[types[extension]].source);\n        var to = preference.indexOf(mime.source);\n        if (types[extension] !== 'application/octet-stream' && (from > to || from === to && types[extension].substr(0, 12) === 'application/')) {\n          // skip the remapping\n          continue;\n        }\n      }\n\n      // set the extension -> mime\n      types[extension] = type;\n    }\n  });\n}\npopulateMaps(extensions, types);\nexport function extension(type) {\n  if (!type || typeof type !== 'string') {\n    return false;\n  }\n\n  // TODO: use media-typer\n  var match = EXTRACT_TYPE_REGEXP.exec(type);\n\n  // get extensions\n  var exts = match && extensions[match[1].toLowerCase()];\n  if (!exts || !exts.length) {\n    return false;\n  }\n  return exts[0];\n}","map":{"version":3,"names":["db","EXTRACT_TYPE_REGEXP","extensions","Object","create","types","populateMaps","preference","undefined","keys","forEach","forEachMimeType","type","mime","exts","length","i","extension","from","indexOf","source","to","substr","match","exec","toLowerCase"],"sources":["/Users/user/develop/study/idontknow/src/common/helpers/mime-types.helpers.js"],"sourcesContent":["import db from '../json/mime-db.json'\n// console.log('db', db)\n\n\nvar EXTRACT_TYPE_REGEXP = /^\\s*([^;\\s]*)(?:;|\\s|$)/\n\nconst extensions = Object.create(null)\nconst types = Object.create(null)\n\nfunction populateMaps(extensions, types) {\n    var preference = ['nginx', 'apache', undefined, 'iana']\n\n    Object.keys(db).forEach(function forEachMimeType(type) {\n        var mime = db[type]\n        var exts = mime.extensions\n\n        if (!exts || !exts.length) {\n            return\n        }\n\n        extensions[type] = exts\n\n        for (var i = 0; i < exts.length; i++) {\n            var extension = exts[i]\n\n            if (types[extension]) {\n                var from = preference.indexOf(db[types[extension]].source)\n                var to = preference.indexOf(mime.source)\n\n                if (types[extension] !== 'application/octet-stream' &&\n                    (from > to || (from === to && types[extension].substr(0, 12) === 'application/'))) {\n                    // skip the remapping\n                    continue\n                }\n            }\n\n            // set the extension -> mime\n            types[extension] = type\n        }\n    })\n}\n\npopulateMaps(extensions, types)\n\nexport function extension(type) {\n    if (!type || typeof type !== 'string') {\n        return false\n    }\n\n    // TODO: use media-typer\n    var match = EXTRACT_TYPE_REGEXP.exec(type)\n\n    // get extensions\n    var exts = match && extensions[match[1].toLowerCase()]\n\n    if (!exts || !exts.length) {\n        return false\n    }\n\n    return exts[0]\n}"],"mappings":"AAAA,OAAOA,EAAE,MAAM,sBAAsB;AACrC;;AAGA,IAAIC,mBAAmB,GAAG,yBAAyB;AAEnD,IAAMC,UAAU,GAAGC,MAAM,CAACC,MAAM,CAAC,IAAI,CAAC;AACtC,IAAMC,KAAK,GAAGF,MAAM,CAACC,MAAM,CAAC,IAAI,CAAC;AAEjC,SAASE,YAAY,CAACJ,UAAU,EAAEG,KAAK,EAAE;EACrC,IAAIE,UAAU,GAAG,CAAC,OAAO,EAAE,QAAQ,EAAEC,SAAS,EAAE,MAAM,CAAC;EAEvDL,MAAM,CAACM,IAAI,CAACT,EAAE,CAAC,CAACU,OAAO,CAAC,SAASC,eAAe,CAACC,IAAI,EAAE;IACnD,IAAIC,IAAI,GAAGb,EAAE,CAACY,IAAI,CAAC;IACnB,IAAIE,IAAI,GAAGD,IAAI,CAACX,UAAU;IAE1B,IAAI,CAACY,IAAI,IAAI,CAACA,IAAI,CAACC,MAAM,EAAE;MACvB;IACJ;IAEAb,UAAU,CAACU,IAAI,CAAC,GAAGE,IAAI;IAEvB,KAAK,IAAIE,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGF,IAAI,CAACC,MAAM,EAAEC,CAAC,EAAE,EAAE;MAClC,IAAIC,SAAS,GAAGH,IAAI,CAACE,CAAC,CAAC;MAEvB,IAAIX,KAAK,CAACY,SAAS,CAAC,EAAE;QAClB,IAAIC,IAAI,GAAGX,UAAU,CAACY,OAAO,CAACnB,EAAE,CAACK,KAAK,CAACY,SAAS,CAAC,CAAC,CAACG,MAAM,CAAC;QAC1D,IAAIC,EAAE,GAAGd,UAAU,CAACY,OAAO,CAACN,IAAI,CAACO,MAAM,CAAC;QAExC,IAAIf,KAAK,CAACY,SAAS,CAAC,KAAK,0BAA0B,KAC9CC,IAAI,GAAGG,EAAE,IAAKH,IAAI,KAAKG,EAAE,IAAIhB,KAAK,CAACY,SAAS,CAAC,CAACK,MAAM,CAAC,CAAC,EAAE,EAAE,CAAC,KAAK,cAAe,CAAC,EAAE;UACnF;UACA;QACJ;MACJ;;MAEA;MACAjB,KAAK,CAACY,SAAS,CAAC,GAAGL,IAAI;IAC3B;EACJ,CAAC,CAAC;AACN;AAEAN,YAAY,CAACJ,UAAU,EAAEG,KAAK,CAAC;AAE/B,OAAO,SAASY,SAAS,CAACL,IAAI,EAAE;EAC5B,IAAI,CAACA,IAAI,IAAI,OAAOA,IAAI,KAAK,QAAQ,EAAE;IACnC,OAAO,KAAK;EAChB;;EAEA;EACA,IAAIW,KAAK,GAAGtB,mBAAmB,CAACuB,IAAI,CAACZ,IAAI,CAAC;;EAE1C;EACA,IAAIE,IAAI,GAAGS,KAAK,IAAIrB,UAAU,CAACqB,KAAK,CAAC,CAAC,CAAC,CAACE,WAAW,EAAE,CAAC;EAEtD,IAAI,CAACX,IAAI,IAAI,CAACA,IAAI,CAACC,MAAM,EAAE;IACvB,OAAO,KAAK;EAChB;EAEA,OAAOD,IAAI,CAAC,CAAC,CAAC;AAClB"},"metadata":{},"sourceType":"module"}