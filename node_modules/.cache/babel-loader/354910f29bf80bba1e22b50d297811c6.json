{"ast":null,"code":"import db from '../json/mime-db.json';\n// console.log('db', db)\n\nvar EXTRACT_TYPE_REGEXP = /^\\s*([^;\\s]*)(?:;|\\s|$)/;\nvar extensions = Object.create(null);\nvar types = Object.create(null);\npopulateMaps(extensions, types);\nexport function extension(type) {\n  if (!type || typeof type !== 'string') {\n    return false;\n  }\n\n  // TODO: use media-typer\n  var match = EXTRACT_TYPE_REGEXP.exec(type);\n\n  // get extensions\n  var exts = match && exports.extensions[match[1].toLowerCase()];\n  if (!exts || !exts.length) {\n    return false;\n  }\n  return exts[0];\n}\nfunction populateMaps(extensions, types) {\n  // source preference (least -> most)\n  var preference = ['nginx', 'apache', undefined, 'iana'];\n  Object.keys(db).forEach(function forEachMimeType(type) {\n    var mime = db[type];\n    var exts = mime.extensions;\n    if (!exts || !exts.length) {\n      return;\n    }\n\n    // mime -> extensions\n    extensions[type] = exts;\n\n    // extension -> mime\n    for (var i = 0; i < exts.length; i++) {\n      var extension = exts[i];\n      if (types[extension]) {\n        var from = preference.indexOf(db[types[extension]].source);\n        var to = preference.indexOf(mime.source);\n        if (types[extension] !== 'application/octet-stream' && (from > to || from === to && types[extension].substr(0, 12) === 'application/')) {\n          // skip the remapping\n          continue;\n        }\n      }\n\n      // set the extension -> mime\n      types[extension] = type;\n    }\n  });\n}","map":{"version":3,"names":["db","EXTRACT_TYPE_REGEXP","extensions","Object","create","types","populateMaps","extension","type","match","exec","exts","exports","toLowerCase","length","preference","undefined","keys","forEach","forEachMimeType","mime","i","from","indexOf","source","to","substr"],"sources":["/Users/user/develop/study/idontknow/src/common/helpers/mime-types.helpers.js"],"sourcesContent":["import db from '../json/mime-db.json'\n// console.log('db', db)\n\n\nvar EXTRACT_TYPE_REGEXP = /^\\s*([^;\\s]*)(?:;|\\s|$)/\n\nconst extensions = Object.create(null)\nconst types = Object.create(null)\n\npopulateMaps(extensions, types)\n\nexport function extension(type) {\n    if (!type || typeof type !== 'string') {\n        return false\n    }\n\n    // TODO: use media-typer\n    var match = EXTRACT_TYPE_REGEXP.exec(type)\n\n    // get extensions\n    var exts = match && exports.extensions[match[1].toLowerCase()]\n\n    if (!exts || !exts.length) {\n      return false\n    }\n\n    return exts[0]\n}\n\nfunction populateMaps (extensions, types) {\n    // source preference (least -> most)\n    var preference = ['nginx', 'apache', undefined, 'iana']\n  \n    Object.keys(db).forEach(function forEachMimeType (type) {\n      var mime = db[type]\n      var exts = mime.extensions\n  \n      if (!exts || !exts.length) {\n        return\n      }\n  \n      // mime -> extensions\n      extensions[type] = exts\n  \n      // extension -> mime\n      for (var i = 0; i < exts.length; i++) {\n        var extension = exts[i]\n  \n        if (types[extension]) {\n          var from = preference.indexOf(db[types[extension]].source)\n          var to = preference.indexOf(mime.source)\n  \n          if (types[extension] !== 'application/octet-stream' &&\n            (from > to || (from === to && types[extension].substr(0, 12) === 'application/'))) {\n            // skip the remapping\n            continue\n          }\n        }\n  \n        // set the extension -> mime\n        types[extension] = type\n      }\n    })\n  }"],"mappings":"AAAA,OAAOA,EAAE,MAAM,sBAAsB;AACrC;;AAGA,IAAIC,mBAAmB,GAAG,yBAAyB;AAEnD,IAAMC,UAAU,GAAGC,MAAM,CAACC,MAAM,CAAC,IAAI,CAAC;AACtC,IAAMC,KAAK,GAAGF,MAAM,CAACC,MAAM,CAAC,IAAI,CAAC;AAEjCE,YAAY,CAACJ,UAAU,EAAEG,KAAK,CAAC;AAE/B,OAAO,SAASE,SAAS,CAACC,IAAI,EAAE;EAC5B,IAAI,CAACA,IAAI,IAAI,OAAOA,IAAI,KAAK,QAAQ,EAAE;IACnC,OAAO,KAAK;EAChB;;EAEA;EACA,IAAIC,KAAK,GAAGR,mBAAmB,CAACS,IAAI,CAACF,IAAI,CAAC;;EAE1C;EACA,IAAIG,IAAI,GAAGF,KAAK,IAAIG,OAAO,CAACV,UAAU,CAACO,KAAK,CAAC,CAAC,CAAC,CAACI,WAAW,EAAE,CAAC;EAE9D,IAAI,CAACF,IAAI,IAAI,CAACA,IAAI,CAACG,MAAM,EAAE;IACzB,OAAO,KAAK;EACd;EAEA,OAAOH,IAAI,CAAC,CAAC,CAAC;AAClB;AAEA,SAASL,YAAY,CAAEJ,UAAU,EAAEG,KAAK,EAAE;EACtC;EACA,IAAIU,UAAU,GAAG,CAAC,OAAO,EAAE,QAAQ,EAAEC,SAAS,EAAE,MAAM,CAAC;EAEvDb,MAAM,CAACc,IAAI,CAACjB,EAAE,CAAC,CAACkB,OAAO,CAAC,SAASC,eAAe,CAAEX,IAAI,EAAE;IACtD,IAAIY,IAAI,GAAGpB,EAAE,CAACQ,IAAI,CAAC;IACnB,IAAIG,IAAI,GAAGS,IAAI,CAAClB,UAAU;IAE1B,IAAI,CAACS,IAAI,IAAI,CAACA,IAAI,CAACG,MAAM,EAAE;MACzB;IACF;;IAEA;IACAZ,UAAU,CAACM,IAAI,CAAC,GAAGG,IAAI;;IAEvB;IACA,KAAK,IAAIU,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGV,IAAI,CAACG,MAAM,EAAEO,CAAC,EAAE,EAAE;MACpC,IAAId,SAAS,GAAGI,IAAI,CAACU,CAAC,CAAC;MAEvB,IAAIhB,KAAK,CAACE,SAAS,CAAC,EAAE;QACpB,IAAIe,IAAI,GAAGP,UAAU,CAACQ,OAAO,CAACvB,EAAE,CAACK,KAAK,CAACE,SAAS,CAAC,CAAC,CAACiB,MAAM,CAAC;QAC1D,IAAIC,EAAE,GAAGV,UAAU,CAACQ,OAAO,CAACH,IAAI,CAACI,MAAM,CAAC;QAExC,IAAInB,KAAK,CAACE,SAAS,CAAC,KAAK,0BAA0B,KAChDe,IAAI,GAAGG,EAAE,IAAKH,IAAI,KAAKG,EAAE,IAAIpB,KAAK,CAACE,SAAS,CAAC,CAACmB,MAAM,CAAC,CAAC,EAAE,EAAE,CAAC,KAAK,cAAe,CAAC,EAAE;UACnF;UACA;QACF;MACF;;MAEA;MACArB,KAAK,CAACE,SAAS,CAAC,GAAGC,IAAI;IACzB;EACF,CAAC,CAAC;AACJ"},"metadata":{},"sourceType":"module"}