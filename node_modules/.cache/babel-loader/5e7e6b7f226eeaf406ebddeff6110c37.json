{"ast":null,"code":"import db from '../json/mime-db.json';\n// console.log('db', db)\n\nvar EXTRACT_TYPE_REGEXP = /^\\s*([^;\\s]*)(?:;|\\s|$)/;\n\n// exports.extensions = Object.create(null)\n\nexport function extension(type) {\n  if (!type || typeof type !== 'string') {\n    return false;\n  }\n\n  // TODO: use media-typer\n  var match = EXTRACT_TYPE_REGEXP.exec(type);\n  // console.log('match', match);\n  // get extensions\n  var exts = match && exports.extensions[match[1].toLowerCase()];\n  if (!exts || !exts.length) {\n    return false;\n  }\n  return exts[0];\n}\nfunction populateMaps(extensions, types) {\n  // source preference (least -> most)\n  var preference = ['nginx', 'apache', undefined, 'iana'];\n  Object.keys(db).forEach(function forEachMimeType(type) {\n    var mime = db[type];\n    var exts = mime.extensions;\n    if (!exts || !exts.length) {\n      return;\n    }\n\n    // mime -> extensions\n    extensions[type] = exts;\n\n    // extension -> mime\n    for (var i = 0; i < exts.length; i++) {\n      var extension = exts[i];\n      if (types[extension]) {\n        var from = preference.indexOf(db[types[extension]].source);\n        var to = preference.indexOf(mime.source);\n        if (types[extension] !== 'application/octet-stream' && (from > to || from === to && types[extension].substr(0, 12) === 'application/')) {\n          // skip the remapping\n          continue;\n        }\n      }\n\n      // set the extension -> mime\n      types[extension] = type;\n    }\n  });\n}","map":{"version":3,"names":["db","EXTRACT_TYPE_REGEXP","extension","type","match","exec","exts","exports","extensions","toLowerCase","length","populateMaps","types","preference","undefined","Object","keys","forEach","forEachMimeType","mime","i","from","indexOf","source","to","substr"],"sources":["/Users/user/develop/study/idontknow/src/common/helpers/mime-types.helpers.js"],"sourcesContent":["import db from '../json/mime-db.json'\n// console.log('db', db)\n\n\nvar EXTRACT_TYPE_REGEXP = /^\\s*([^;\\s]*)(?:;|\\s|$)/\n\n// exports.extensions = Object.create(null)\n\nexport function extension(type) {\n    if (!type || typeof type !== 'string') {\n        return false\n    }\n\n    // TODO: use media-typer\n    var match = EXTRACT_TYPE_REGEXP.exec(type)\n    // console.log('match', match);\n    // get extensions\n    var exts = match && exports.extensions[match[1].toLowerCase()]\n\n    if (!exts || !exts.length) {\n      return false\n    }\n\n    return exts[0]\n}\n\nfunction populateMaps (extensions, types) {\n    // source preference (least -> most)\n    var preference = ['nginx', 'apache', undefined, 'iana']\n  \n    Object.keys(db).forEach(function forEachMimeType (type) {\n      var mime = db[type]\n      var exts = mime.extensions\n  \n      if (!exts || !exts.length) {\n        return\n      }\n  \n      // mime -> extensions\n      extensions[type] = exts\n  \n      // extension -> mime\n      for (var i = 0; i < exts.length; i++) {\n        var extension = exts[i]\n  \n        if (types[extension]) {\n          var from = preference.indexOf(db[types[extension]].source)\n          var to = preference.indexOf(mime.source)\n  \n          if (types[extension] !== 'application/octet-stream' &&\n            (from > to || (from === to && types[extension].substr(0, 12) === 'application/'))) {\n            // skip the remapping\n            continue\n          }\n        }\n  \n        // set the extension -> mime\n        types[extension] = type\n      }\n    })\n  }"],"mappings":"AAAA,OAAOA,EAAE,MAAM,sBAAsB;AACrC;;AAGA,IAAIC,mBAAmB,GAAG,yBAAyB;;AAEnD;;AAEA,OAAO,SAASC,SAAS,CAACC,IAAI,EAAE;EAC5B,IAAI,CAACA,IAAI,IAAI,OAAOA,IAAI,KAAK,QAAQ,EAAE;IACnC,OAAO,KAAK;EAChB;;EAEA;EACA,IAAIC,KAAK,GAAGH,mBAAmB,CAACI,IAAI,CAACF,IAAI,CAAC;EAC1C;EACA;EACA,IAAIG,IAAI,GAAGF,KAAK,IAAIG,OAAO,CAACC,UAAU,CAACJ,KAAK,CAAC,CAAC,CAAC,CAACK,WAAW,EAAE,CAAC;EAE9D,IAAI,CAACH,IAAI,IAAI,CAACA,IAAI,CAACI,MAAM,EAAE;IACzB,OAAO,KAAK;EACd;EAEA,OAAOJ,IAAI,CAAC,CAAC,CAAC;AAClB;AAEA,SAASK,YAAY,CAAEH,UAAU,EAAEI,KAAK,EAAE;EACtC;EACA,IAAIC,UAAU,GAAG,CAAC,OAAO,EAAE,QAAQ,EAAEC,SAAS,EAAE,MAAM,CAAC;EAEvDC,MAAM,CAACC,IAAI,CAAChB,EAAE,CAAC,CAACiB,OAAO,CAAC,SAASC,eAAe,CAAEf,IAAI,EAAE;IACtD,IAAIgB,IAAI,GAAGnB,EAAE,CAACG,IAAI,CAAC;IACnB,IAAIG,IAAI,GAAGa,IAAI,CAACX,UAAU;IAE1B,IAAI,CAACF,IAAI,IAAI,CAACA,IAAI,CAACI,MAAM,EAAE;MACzB;IACF;;IAEA;IACAF,UAAU,CAACL,IAAI,CAAC,GAAGG,IAAI;;IAEvB;IACA,KAAK,IAAIc,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGd,IAAI,CAACI,MAAM,EAAEU,CAAC,EAAE,EAAE;MACpC,IAAIlB,SAAS,GAAGI,IAAI,CAACc,CAAC,CAAC;MAEvB,IAAIR,KAAK,CAACV,SAAS,CAAC,EAAE;QACpB,IAAImB,IAAI,GAAGR,UAAU,CAACS,OAAO,CAACtB,EAAE,CAACY,KAAK,CAACV,SAAS,CAAC,CAAC,CAACqB,MAAM,CAAC;QAC1D,IAAIC,EAAE,GAAGX,UAAU,CAACS,OAAO,CAACH,IAAI,CAACI,MAAM,CAAC;QAExC,IAAIX,KAAK,CAACV,SAAS,CAAC,KAAK,0BAA0B,KAChDmB,IAAI,GAAGG,EAAE,IAAKH,IAAI,KAAKG,EAAE,IAAIZ,KAAK,CAACV,SAAS,CAAC,CAACuB,MAAM,CAAC,CAAC,EAAE,EAAE,CAAC,KAAK,cAAe,CAAC,EAAE;UACnF;UACA;QACF;MACF;;MAEA;MACAb,KAAK,CAACV,SAAS,CAAC,GAAGC,IAAI;IACzB;EACF,CAAC,CAAC;AACJ"},"metadata":{},"sourceType":"module"}